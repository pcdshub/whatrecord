
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="SLAC National Accelerator Laboratory">
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../cli/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.6">
    
    
      
        <title>Parsers - whatrecord</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0e669242.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="lightblue" data-md-color-accent="purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#parsers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="whatrecord" class="md-header__button md-logo" aria-label="whatrecord" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.41 3 3 4.41 5.69 7.1A7.924 7.924 0 0 0 4 12c0 1.85.63 3.55 1.69 4.9L3 19.59 4.41 21l2.69-2.69A7.924 7.924 0 0 0 12 20c1.85 0 3.55-.63 4.9-1.69L19.59 21 21 19.59l-2.69-2.69A7.924 7.924 0 0 0 20 12c0-1.85-.63-3.55-1.69-4.9L21 4.41 19.59 3 16.9 5.69A7.924 7.924 0 0 0 12 4c-1.85 0-3.55.63-4.9 1.69L4.41 3M12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            whatrecord
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Parsers
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="lightblue" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  whatrecord

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Parsers

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../cli/" class="md-tabs__link">
        
  
    
  
  CLI

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../server_client/" class="md-tabs__link">
        
  
    
  
  Server / client

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../plugins/" class="md-tabs__link">
        
  
    
  
  Plugins

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../utilities/" class="md-tabs__link">
        
  
    
  
  Shared / Utilities

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../iocsh/" class="md-tabs__link">
        
  
    
  
  IOC Shell-Related

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../lcls/" class="md-tabs__link">
        
  
    
  
  LCLS

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../tests/" class="md-tabs__link">
        
  
    
  
  Tests

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="whatrecord" class="md-nav__button md-logo" aria-label="whatrecord" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.41 3 3 4.41 5.69 7.1A7.924 7.924 0 0 0 4 12c0 1.85.63 3.55 1.69 4.9L3 19.59 4.41 21l2.69-2.69A7.924 7.924 0 0 0 12 20c1.85 0 3.55-.63 4.9-1.69L19.59 21 21 19.59l-2.69-2.69A7.924 7.924 0 0 0 20 12c0-1.85-.63-3.55-1.69-4.9L21 4.41 19.59 3 16.9 5.69A7.924 7.924 0 0 0 12 4c-1.85 0-3.55.63-4.9 1.69L4.41 3M12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6Z"/></svg>

    </a>
    whatrecord
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    whatrecord
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Parsers
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Parsers
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
    <nav class="md-nav" aria-label="API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security" class="md-nav__link">
    access_security
  </a>
  
    <nav class="md-nav" aria-label="access_security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.AccessSecurityConfig" class="md-nav__link">
    AccessSecurityConfig
  </a>
  
    <nav class="md-nav" aria-label="AccessSecurityConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.AccessSecurityConfig-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.AccessSecurityGroup" class="md-nav__link">
    AccessSecurityGroup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.AccessSecurityRule" class="md-nav__link">
    AccessSecurityRule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.AccessSecurityState" class="md-nav__link">
    AccessSecurityState
  </a>
  
    <nav class="md-nav" aria-label="AccessSecurityState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.AccessSecurityState-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.HostAccessGroup" class="md-nav__link">
    HostAccessGroup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security.UserAccessGroup" class="md-nav__link">
    UserAccessGroup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.access_security-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave" class="md-nav__link">
    autosave
  </a>
  
    <nav class="md-nav" aria-label="autosave">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave.AutosaveRestoreFile" class="md-nav__link">
    AutosaveRestoreFile
  </a>
  
    <nav class="md-nav" aria-label="AutosaveRestoreFile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave.AutosaveRestoreFile-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave.AutosaveRestorePassFile" class="md-nav__link">
    AutosaveRestorePassFile
  </a>
  
    <nav class="md-nav" aria-label="AutosaveRestorePassFile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave.AutosaveRestorePassFile-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave.AutosaveState" class="md-nav__link">
    AutosaveState
  </a>
  
    <nav class="md-nav" aria-label="AutosaveState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave.AutosaveState-attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave.AutosaveState-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.autosave-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.db" class="md-nav__link">
    db
  </a>
  
    <nav class="md-nav" aria-label="db">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.db-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.db.Database" class="md-nav__link">
    Database
  </a>
  
    <nav class="md-nav" aria-label="Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.db.Database-attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.db.Database-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.db.DatabaseLint" class="md-nav__link">
    DatabaseLint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.db.DatabaseLoadFailure" class="md-nav__link">
    DatabaseLoadFailure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.db-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.db.split_record_and_field" class="md-nav__link">
    split_record_and_field()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate" class="md-nav__link">
    dbtemplate
  </a>
  
    <nav class="md-nav" aria-label="dbtemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.GlobalDefinitions" class="md-nav__link">
    GlobalDefinitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.PatternHeader" class="md-nav__link">
    PatternHeader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.PatternValues" class="md-nav__link">
    PatternValues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.Substitution" class="md-nav__link">
    Substitution
  </a>
  
    <nav class="md-nav" aria-label="Substitution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.Substitution-attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.Substitution-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.TemplateSubstitution" class="md-nav__link">
    TemplateSubstitution
  </a>
  
    <nav class="md-nav" aria-label="TemplateSubstitution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.TemplateSubstitution-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate.VariableDefinitions" class="md-nav__link">
    VariableDefinitions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.dbtemplate-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway" class="md-nav__link">
    gateway
  </a>
  
    <nav class="md-nav" aria-label="gateway">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.AccessSecurity" class="md-nav__link">
    AccessSecurity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.AliasRule" class="md-nav__link">
    AliasRule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.AllowRule" class="md-nav__link">
    AllowRule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.DenyRule" class="md-nav__link">
    DenyRule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.GatewayConfig" class="md-nav__link">
    GatewayConfig
  </a>
  
    <nav class="md-nav" aria-label="GatewayConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.GatewayConfig-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.PVList" class="md-nav__link">
    PVList
  </a>
  
    <nav class="md-nav" aria-label="PVList">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.PVList-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.Rule" class="md-nav__link">
    Rule
  </a>
  
    <nav class="md-nav" aria-label="Rule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.Rule-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.gateway.create_arg_parser" class="md-nav__link">
    create_arg_parser()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl" class="md-nav__link">
    snl
  </a>
  
    <nav class="md-nav" aria-label="snl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl.InitExpression" class="md-nav__link">
    InitExpression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl.SequencerProgram" class="md-nav__link">
    SequencerProgram
  </a>
  
    <nav class="md-nav" aria-label="SequencerProgram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl.SequencerProgram-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl.SequencerProgramGraph" class="md-nav__link">
    SequencerProgramGraph
  </a>
  
    <nav class="md-nav" aria-label="SequencerProgramGraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl.SequencerProgramGraph-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.snl-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.streamdevice" class="md-nav__link">
    streamdevice
  </a>
  
    <nav class="md-nav" aria-label="streamdevice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.streamdevice-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.streamdevice.StreamDeviceState" class="md-nav__link">
    StreamDeviceState
  </a>
  
    <nav class="md-nav" aria-label="StreamDeviceState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.streamdevice.StreamDeviceState-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.streamdevice.StreamProtocol" class="md-nav__link">
    StreamProtocol
  </a>
  
    <nav class="md-nav" aria-label="StreamProtocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.streamdevice.StreamProtocol-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.streamdevice-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer" class="md-nav__link">
    transformer
  </a>
  
    <nav class="md-nav" aria-label="transformer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer-classes" class="md-nav__link">
    Classes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.context_from_token" class="md-nav__link">
    context_from_token()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.context_from_tree" class="md-nav__link">
    context_from_tree()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.dictify" class="md-nav__link">
    dictify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.ignore" class="md-nav__link">
    ignore()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.listify" class="md-nav__link">
    listify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.listify_strings" class="md-nav__link">
    listify_strings()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.pass_through" class="md-nav__link">
    pass_through()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.stringify" class="md-nav__link">
    stringify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whatrecord.transformer.tuple_args" class="md-nav__link">
    tuple_args()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../server_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server / client
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../utilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shared / Utilities
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../iocsh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IOC Shell-Related
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../lcls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LCLS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="parsers">Parsers</h1>
<h2 id="usage">Usage</h2>
<p>For each of the parser classes:</p>
<ul>
<li><a href="#whatrecord.access_security.AccessSecurityConfig">AccessSecurityConfig</a></li>
<li><a href="#whatrecord.db.Database">Database</a></li>
<li><a href="#whatrecord.gateway.PVList">GatewayPVList</a></li>
<li><a href="#whatrecord.plugins.epicsarch.LclsEpicsArchFile">LclsEpicsArchFile</a></li>
<li><a href="#whatrecord.snl.SequencerProgram">SequencerProgram</a></li>
<li><a href="#whatrecord.streamdevice.StreamProtocol">StreamProtocol</a></li>
<li><a href="#whatrecord.dbtemplate.TemplateSubstitution">TemplateSubstitution</a></li>
</ul>
<p>Data can be loaded from a file, file object, or string. Filename information
will be automatically added to the load context information when available,
but may be specified separately in the latter case.</p>
<p>Taking <a href="#whatrecord.access_security.AccessSecurityConfig">AccessSecurityConfig</a>
for example:</p>
<pre><code class="language-python">from whatrecord import AccessSecurityConfig

# 1. Load from a file directly
config = AccessSecurityConfig.from_file(&quot;filename.acf&quot;)

# 2. Load from a file object
with open(&quot;filename.acf&quot;, &quot;rt&quot;) as fp:
    config = AccessSecurityConfig.from_file_obj(fp)

# 3. Load from a string:
with open(&quot;filename.acf&quot;, &quot;rt&quot;) as fp:
    contents = fp.read()

config = AccessSecurityConfig.from_string(contents, filename=&quot;filename.acf&quot;)
</code></pre>
<h2 id="api">API</h2>


<div class="doc doc-object doc-module">




<h3 id="whatrecord.access_security" class="doc doc-heading">
          <code>whatrecord.access_security</code>


</h3>

  <div class="doc doc-contents first">
  
      <p>V3 Access Security file parsing.</p>
<p>Documentation from the application developer's guide are interspersed here
and in the classes below.</p>
<pre><code>A brief summary of the Functional Requirements is:
    * Each field of each record type is assigned an access security level.
    * Each record instance is assigned to a unique access security group.
    * Each user is assigned to one or more user access groups.
    * Each node is assigned to a host access group.

For each access security group a set of access rules can be defined. Each rule
specifies:
    -  Access security level
    -  READ or READ/WRITE access.
    -  An optional list of User Access Groups or * meaning anyone.
    -  An optional list of Host Access Groups or * meaning anywhere.
    -  Conditions based on values of process variables
</code></pre>

  

  <div class="doc doc-children">






<h4 id="whatrecord.access_security-classes">Classes</h4>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.access_security.AccessSecurityConfig" class="doc doc-heading">
          <code>whatrecord.access_security.AccessSecurityConfig</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>An Access Security Configuration file (ACF) container.</p>


  

  <div class="doc doc-children">







<h6 id="whatrecord.access_security.AccessSecurityConfig-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.access_security.AccessSecurityConfig.from_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">access_security</span><span class="o">.</span><span class="n">AccessSecurityConfig</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">AccessSecurityConfig</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load an ACF file from a filename.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/access_security.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">AccessSecurityConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load an ACF file from a filename.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">fn</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.access_security.AccessSecurityConfig.from_file_obj" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">access_security</span><span class="o">.</span><span class="n">AccessSecurityConfig</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccessSecurityConfig</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load an ACF file from a file object.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/access_security.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccessSecurityConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load an ACF file from a file object.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">fp</span><span class="p">)))</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.access_security.AccessSecurityConfig.from_string" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">access_security</span><span class="o">.</span><span class="n">AccessSecurityConfig</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccessSecurityConfig</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load access security configuration from a string.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>contents</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The access security file contents.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>filename : str, optional
    The access security filename to use for LoadContext.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/access_security.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AccessSecurityConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load access security configuration from a string.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    contents : str</span>
<span class="sd">        The access security file contents.</span>

<span class="sd">    filename : str, optional</span>
<span class="sd">        The access security filename to use for LoadContext.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">contents_hash</span> <span class="o">=</span> <span class="n">get_bytes_sha256</span><span class="p">(</span><span class="n">contents</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">add_comment</span><span class="p">(</span><span class="n">comment</span><span class="p">:</span> <span class="n">lark</span><span class="o">.</span><span class="n">Token</span><span class="p">):</span>
        <span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">StringWithContext</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;# &quot;</span><span class="p">),</span>
                <span class="n">context</span><span class="o">=</span><span class="n">context_from_lark_token</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">comment</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="n">grammar</span> <span class="o">=</span> <span class="n">lark</span><span class="o">.</span><span class="n">Lark</span><span class="o">.</span><span class="n">open_from_package</span><span class="p">(</span>
        <span class="s2">&quot;whatrecord&quot;</span><span class="p">,</span>
        <span class="s2">&quot;access_security.lark&quot;</span><span class="p">,</span>
        <span class="n">search_paths</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;grammar&quot;</span><span class="p">,</span> <span class="p">),</span>
        <span class="n">parser</span><span class="o">=</span><span class="s2">&quot;lalr&quot;</span><span class="p">,</span>
        <span class="n">lexer_callbacks</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;COMMENT&quot;</span><span class="p">:</span> <span class="n">add_comment</span><span class="p">},</span>
        <span class="n">transformer</span><span class="o">=</span><span class="n">_AcfTransformer</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">contents_hash</span><span class="p">,</span> <span class="n">comments</span><span class="p">),</span>
        <span class="n">maybe_placeholders</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">grammar</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.access_security.AccessSecurityConfig.get_group_from_record" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">access_security</span><span class="o">.</span><span class="n">AccessSecurityConfig</span><span class="o">.</span><span class="n">get_group_from_record</span><span class="p">(</span><span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AccessSecurityGroup</span><span class="p">]</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Get the appropriate access security group for the given record.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/access_security.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_group_from_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AccessSecurityGroup</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the appropriate access security group for the given record.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">is_pva</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">access_security_group</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.access_security.AccessSecurityGroup" class="doc doc-heading">
          <code>whatrecord.access_security.AccessSecurityGroup</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>An access security group.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.access_security.AccessSecurityRule" class="doc doc-heading">
          <code>whatrecord.access_security.AccessSecurityRule</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Access Security Configuration rule, which defines access permissions.</p>
<p><level> must be 0 or 1. Permission for a level 1 field implies permission
for level 0 fields.</p>
<p>The permissions are NONE, READ, and WRITE. WRITE permission implies READ
permission. The standard EPICS record types have all fields set to level 1
except for VAL, CMD (command), and RES (reset). An optional argument
specifies if writes should be trapped. See the section below on trapping
Channel Access writes for how this is used. If not given the default is
NOTRAPWRITE.</p>
<p>UAG specifies a list of user access groups that can have the access
privilege. If UAG is not defined then all users are allowed.</p>
<p>HAG specifies a list of host access groups that have the access privilege.
If HAG is not defined then all hosts are allowed.</p>
<p>CALC is just like the CALC field of a calculation record except that the
result must evaluate to TRUE or FALSE. The rule only applies if the
calculation result is TRUE, where the actual test for TRUE is
(0.99 &lt; result &lt; 1.01).</p>
<p>Anything else is regarded as FALSE and will cause the rule to be ignored.
Assignment statements are not permitted in CALC expressions here.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.access_security.AccessSecurityState" class="doc doc-heading">
          <code>whatrecord.access_security.AccessSecurityState</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="whatrecord.common.ShellStateHandler" href="../utilities/#whatrecord.common.ShellStateHandler">ShellStateHandler</a></code></p>

  
      <p>Access Security IOC shell state handler / container.</p>
<p>Contains hooks for as-related commands and state information.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>config</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.access_security.AccessSecurityState" href="#whatrecord.access_security.AccessSecurityState">AccessSecurityState</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The access security configuration.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The access security filename.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>macros</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Macros used when expanding the access security file.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>


  

  <div class="doc doc-children">







<h6 id="whatrecord.access_security.AccessSecurityState-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.access_security.AccessSecurityState.annotate_record" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">access_security</span><span class="o">.</span><span class="n">AccessSecurityState</span><span class="o">.</span><span class="n">annotate_record</span><span class="p">(</span><span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Annotate record with access security information.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/access_security.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">annotate_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Annotate record with access security information.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">asg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_group_from_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">asg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">apischema</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">asg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.access_security.HostAccessGroup" class="doc doc-heading">
          <code>whatrecord.access_security.HostAccessGroup</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Host Access Group.</p>
<p>This is a list of host names. It may be empty. The same host name can
appear in multiple HAGs. To match, a host name must match the host name
read by the CA client library running on the client machine; both names are
converted to lower case before comparison however. For vxWorks clients, the
host name is usually taken from the target name of the boot parameters.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.access_security.UserAccessGroup" class="doc doc-heading">
          <code>whatrecord.access_security.UserAccessGroup</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>User Access Group.</p>
<p>This is a list of user names. The list may be empty. A user name may appear
in more than one UAG. To match, a user name must be identical to the user
name read by the CA client library running on the client machine. For
vxWorks clients, the user name is usually taken from the user field of the
boot parameters.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>
<h4 id="whatrecord.access_security-functions">Functions</h4>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




<h3 id="whatrecord.autosave" class="doc doc-heading">
          <code>whatrecord.autosave</code>


</h3>

  <div class="doc doc-contents first">

  

  <div class="doc doc-children">






<h4 id="whatrecord.autosave-classes">Classes</h4>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.autosave.AutosaveRestoreFile" class="doc doc-heading">
          <code>whatrecord.autosave.AutosaveRestoreFile</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Representation of an autosave restore (.sav) file.</p>


  

  <div class="doc doc-children">







<h6 id="whatrecord.autosave.AutosaveRestoreFile-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveRestoreFile.from_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveRestoreFile</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">,</span> <span class="n">macros</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load an autosave restore (.sav) file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span> or str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The filename.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>file</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.autosave.AutosaveRestoreFile" href="#whatrecord.autosave.AutosaveRestoreFile">AutosaveRestoreFile</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The resulting parsed file.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">,</span> <span class="n">macros</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load an autosave restore (.sav) file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : pathlib.Path or str</span>
<span class="sd">        The filename.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    file : AutosaveRestoreFile</span>
<span class="sd">        The resulting parsed file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">macros</span><span class="o">=</span><span class="n">macros</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveRestoreFile.from_file_obj" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveRestoreFile</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">,</span> <span class="n">macros</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load an autosave file given a file object.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file_obj</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">,</span> <span class="n">macros</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load an autosave file given a file object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
        <span class="n">filename</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
        <span class="n">macros</span><span class="o">=</span><span class="n">macros</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveRestoreFile.from_string" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveRestoreFile</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macros</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load an autosave file given its string contents.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">macros</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load an autosave file given its string contents.&quot;&quot;&quot;</span>
    <span class="n">grammar</span> <span class="o">=</span> <span class="n">lark</span><span class="o">.</span><span class="n">Lark</span><span class="o">.</span><span class="n">open_from_package</span><span class="p">(</span>
        <span class="s2">&quot;whatrecord&quot;</span><span class="p">,</span>
        <span class="s2">&quot;autosave_save.lark&quot;</span><span class="p">,</span>
        <span class="n">search_paths</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;grammar&quot;</span><span class="p">,</span> <span class="p">),</span>
        <span class="n">parser</span><span class="o">=</span><span class="s2">&quot;earley&quot;</span><span class="p">,</span>
        <span class="n">maybe_placeholders</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">propagate_positions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">macros</span><span class="p">:</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">MacroContext</span><span class="p">(</span><span class="n">macros</span><span class="o">=</span><span class="n">macros</span><span class="p">)</span><span class="o">.</span><span class="n">expand_by_line</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_AutosaveRestoreTransformer</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
        <span class="n">grammar</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.autosave.AutosaveRestorePassFile" class="doc doc-heading">
          <code>whatrecord.autosave.AutosaveRestorePassFile</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">



  

  <div class="doc doc-children">







<h6 id="whatrecord.autosave.AutosaveRestorePassFile-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveRestorePassFile.update" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveRestorePassFile</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">save_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Update the autosave .sav file from disk.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AutosaveRestoreFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the autosave .sav file from disk.&quot;&quot;&quot;</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">save_path</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_filename</span>
    <span class="n">file_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mtime</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_timestamp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">file_timestamp</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_timestamp</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_timestamp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_timestamp</span>
        <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">settings</span><span class="o">.</span><span class="n">AUTOSAVE_RELOAD_PERIOD</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">file_timestamp</span> <span class="o">=</span> <span class="n">file_timestamp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">AutosaveRestoreFile</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span>
        <span class="n">fn</span><span class="p">,</span>
        <span class="n">macros</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">macros</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.autosave.AutosaveState" class="doc doc-heading">
          <code>whatrecord.autosave.AutosaveState</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="whatrecord.common.ShellStateHandler" href="../utilities/#whatrecord.common.ShellStateHandler">ShellStateHandler</a></code></p>

  
      <p>The state of autosave in an IOC.</p>


  

  <div class="doc doc-children">





<h6 id="whatrecord.autosave.AutosaveState-attributes">Attributes</h6>

<div class="doc doc-object doc-attribute">




<h7 id="whatrecord.autosave.AutosaveState.save_name_pv" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">save_name_pv</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>The save name PV, derived from the macro context.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="whatrecord.autosave.AutosaveState.save_path_pv" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">save_path_pv</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>The save path PV, derived from the macro context.</p>
  </div>

</div>

<h6 id="whatrecord.autosave.AutosaveState-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_appendToFile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_appendToFile</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Append line to a file.</p>
<p>For example, to add a line to built_settings.req yourself:</p>
<p>appendToFile("built_settings.req", '$(P)userStringSeqEnable')</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_appendToFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Append line to a file.</span>

<span class="sd">    For example, to add a line to built_settings.req yourself:</span>

<span class="sd">    appendToFile(&quot;built_settings.req&quot;, &#39;$(P)userStringSeqEnable&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_asVerify" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_asVerify</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">restoreFileName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Compare PV values in the IOC with values written in filename
(which should be an autosave restore file, or at least look like one).
If restoreFileName is not empty, write a new restore file.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_asVerify</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">restoreFileName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compare PV values in the IOC with values written in filename</span>
<span class="sd">    (which should be an autosave restore file, or at least look like one).</span>
<span class="sd">    If restoreFileName is not empty, write a new restore file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_autosaveBuild" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_autosaveBuild</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">reqFileSuffix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">on</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>It's tedious and error prone to have these entries separately
maintained, so autosave can do the request-file part for you. To do
this, you tell autosave to arrange to be called whenever
dbLoadRecords() is called
(note that dbLoadTemplate() calls dbLoadRecords()), you tell it how to
make a request-file name from a database-file name, and you give it the
name of the request file you want it to build. You can do this with the
following command:</p>
<pre><code>autosaveBuild("built_settings.req", "_settings.req", 1)
</code></pre>
<p>This tells autosave to do the following:</p>
<pre><code>1. Begin building the file built_settings.req. If this is the first
   call that mentions built_settings.req, erase the file.
2. Generate request-file names by stripping ".db", or ".vdb", or
   ".template" from database-file names, and adding the suffix
   "_settings.req".
3. Enable (disable) automated building if the third argument is 1
   (0).
</code></pre>
<p>While automated building is enabled, autosave will generate
request-file names and search for those files in its request-file path.
If it finds a request file, it will add the appropriate line to
built_settings.req.</p>
<p>All this does is get the file built_settings.req built. If you want it
to be used, you must add the following line to auto_settings.req:</p>
<pre><code>file built_settings.req P=$(P)
</code></pre>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_autosaveBuild</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">reqFileSuffix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">on</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    It&#39;s tedious and error prone to have these entries separately</span>
<span class="sd">    maintained, so autosave can do the request-file part for you. To do</span>
<span class="sd">    this, you tell autosave to arrange to be called whenever</span>
<span class="sd">    dbLoadRecords() is called</span>
<span class="sd">    (note that dbLoadTemplate() calls dbLoadRecords()), you tell it how to</span>
<span class="sd">    make a request-file name from a database-file name, and you give it the</span>
<span class="sd">    name of the request file you want it to build. You can do this with the</span>
<span class="sd">    following command:</span>

<span class="sd">        autosaveBuild(&quot;built_settings.req&quot;, &quot;_settings.req&quot;, 1)</span>

<span class="sd">    This tells autosave to do the following:</span>

<span class="sd">        1. Begin building the file built_settings.req. If this is the first</span>
<span class="sd">           call that mentions built_settings.req, erase the file.</span>
<span class="sd">        2. Generate request-file names by stripping &quot;.db&quot;, or &quot;.vdb&quot;, or</span>
<span class="sd">           &quot;.template&quot; from database-file names, and adding the suffix</span>
<span class="sd">           &quot;_settings.req&quot;.</span>
<span class="sd">        3. Enable (disable) automated building if the third argument is 1</span>
<span class="sd">           (0).</span>

<span class="sd">    While automated building is enabled, autosave will generate</span>
<span class="sd">    request-file names and search for those files in its request-file path.</span>
<span class="sd">    If it finds a request file, it will add the appropriate line to</span>
<span class="sd">    built_settings.req.</span>

<span class="sd">    All this does is get the file built_settings.req built. If you want it</span>
<span class="sd">    to be used, you must add the following line to auto_settings.req:</span>

<span class="sd">        file built_settings.req P=$(P)</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_create_manual_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_create_manual_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Create a save set for the request file. The save file will be written
when the function manual_save() is called with the same request-file
name.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_create_manual_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a save set for the request file. The save file will be written</span>
<span class="sd">    when the function manual_save() is called with the same request-file</span>
<span class="sd">    name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sets</span><span class="p">[</span><span class="n">filename</span><span class="p">]</span> <span class="o">=</span> <span class="n">AutosaveSet</span><span class="p">(</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_load_context</span><span class="p">(),</span>
        <span class="n">request_filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
        <span class="n">save_filename</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.sav&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">),</span>
        <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">trigger_channel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">macros</span><span class="o">=</span><span class="n">macros_from_string</span><span class="p">(</span><span class="n">macro_string</span><span class="p">),</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;manual&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_create_monitor_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_create_monitor_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Create a save set for the request file. The save file will be written
every period seconds, if any PV in the save set was posted
(changed value) since the last write.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_create_monitor_set</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a save set for the request file. The save file will be written</span>
<span class="sd">    every period seconds, if any PV in the save set was posted</span>
<span class="sd">    (changed value) since the last write.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># An indicator to &quot;start the save task&quot;</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">sets</span><span class="p">[</span><span class="n">filename</span><span class="p">]</span> <span class="o">=</span> <span class="n">AutosaveSet</span><span class="p">(</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_load_context</span><span class="p">(),</span>
        <span class="n">request_filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
        <span class="n">save_filename</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.sav&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">),</span>
        <span class="n">period</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">period</span><span class="p">),</span>
        <span class="n">trigger_channel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">macros</span><span class="o">=</span><span class="n">macros_from_string</span><span class="p">(</span><span class="n">macro_string</span><span class="p">),</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;monitor&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_create_periodic_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_create_periodic_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Create a save set for the request file. The save file will be written
every period seconds.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_create_periodic_set</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a save set for the request file. The save file will be written</span>
<span class="sd">    every period seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sets</span><span class="p">[</span><span class="n">filename</span><span class="p">]</span> <span class="o">=</span> <span class="n">AutosaveSet</span><span class="p">(</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_load_context</span><span class="p">(),</span>
        <span class="n">request_filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
        <span class="n">save_filename</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.sav&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">),</span>
        <span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">,</span>
        <span class="n">trigger_channel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">macros</span><span class="o">=</span><span class="n">macros_from_string</span><span class="p">(</span><span class="n">macro_string</span><span class="p">),</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;periodic&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_create_triggered_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_create_triggered_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">trigger_channel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Create a save set for the request file. The save file will be written
whenever the PV specified by trigger_channel is posted. Normally this
occurs when the PV's value changes.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_create_triggered_set</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">trigger_channel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a save set for the request file. The save file will be written</span>
<span class="sd">    whenever the PV specified by trigger_channel is posted. Normally this</span>
<span class="sd">    occurs when the PV&#39;s value changes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sets</span><span class="p">[</span><span class="n">filename</span><span class="p">]</span> <span class="o">=</span> <span class="n">AutosaveSet</span><span class="p">(</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_load_context</span><span class="p">(),</span>
        <span class="n">request_filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
        <span class="n">save_filename</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.sav&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">),</span>
        <span class="n">period</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">trigger_channel</span><span class="o">=</span><span class="n">trigger_channel</span><span class="p">,</span>
        <span class="n">macros</span><span class="o">=</span><span class="n">macros_from_string</span><span class="p">(</span><span class="n">macro_string</span><span class="p">),</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;triggered&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_dbrestoreShow" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_dbrestoreShow</span><span class="p">()</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>List all the save sets currently being managed by the save_restore
task. If (verbose != 0), lists the PV's as well.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_dbrestoreShow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    List all the save sets currently being managed by the save_restore</span>
<span class="sd">    task. If (verbose != 0), lists the PV&#39;s as well.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_eraseFile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_eraseFile</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Erase (empty) an autosave file.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_eraseFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Erase (empty) an autosave file.&quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_fdbrestore" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_fdbrestore</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>If save_file refers to a save set that exists in memory, then PV's in
the save set will be restored from values in memory. Otherwise, this
functions restores the PV's in <saveRestorePath>/<save_file> and
creates a new backup file "<saveRestorePath>/<save_file>.bu". The
effect probably will not be the same as a boot-time restore, because
caput() calls are used instead of static database access dbPutX()
calls. Record processing will result from caput()'s to inherently
process- passive fields.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_fdbrestore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If save_file refers to a save set that exists in memory, then PV&#39;s in</span>
<span class="sd">    the save set will be restored from values in memory. Otherwise, this</span>
<span class="sd">    functions restores the PV&#39;s in &lt;saveRestorePath&gt;/&lt;save_file&gt; and</span>
<span class="sd">    creates a new backup file &quot;&lt;saveRestorePath&gt;/&lt;save_file&gt;.bu&quot;. The</span>
<span class="sd">    effect probably will not be the same as a boot-time restore, because</span>
<span class="sd">    caput() calls are used instead of static database access dbPutX()</span>
<span class="sd">    calls. Record processing will result from caput()&#39;s to inherently</span>
<span class="sd">    process- passive fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_fdbrestoreX" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_fdbrestoreX</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macrostring</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>This function restores from the file <saveRestorePath>/<save_file>,
which can look just like a save file, but which needn't end with <END>.
No backup file will be written. The effect probably will not be the
same as a boot-time restore, because caput() calls are used instead of
static database access dbPut*() calls. Record processing will result
from caput()'s to inherently process-passive fields.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_fdbrestoreX</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">macrostring</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function restores from the file &lt;saveRestorePath&gt;/&lt;save_file&gt;,</span>
<span class="sd">    which can look just like a save file, but which needn&#39;t end with &lt;END&gt;.</span>
<span class="sd">    No backup file will be written. The effect probably will not be the</span>
<span class="sd">    same as a boot-time restore, because caput() calls are used instead of</span>
<span class="sd">    static database access dbPut*() calls. Record processing will result</span>
<span class="sd">    from caput()&#39;s to inherently process-passive fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_makeAutosaveFileFromDbInfo" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_makeAutosaveFileFromDbInfo</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">info_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Search through the EPICS database
(that is, all EPICS records loaded into an IOC) for 'info' nodes named
info_name; construct a list of PV names from the associated info_values
found, and write the PV names to the file fileBaseName. If fileBaseName
does not contain the string '.req', this string will be appended to it.
See makeAutosaveFiles() for more information.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_makeAutosaveFileFromDbInfo</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">info_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search through the EPICS database</span>
<span class="sd">    (that is, all EPICS records loaded into an IOC) for &#39;info&#39; nodes named</span>
<span class="sd">    info_name; construct a list of PV names from the associated info_values</span>
<span class="sd">    found, and write the PV names to the file fileBaseName. If fileBaseName</span>
<span class="sd">    does not contain the string &#39;.req&#39;, this string will be appended to it.</span>
<span class="sd">    See makeAutosaveFiles() for more information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_makeAutosaveFiles" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_makeAutosaveFiles</span><span class="p">()</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Search through the EPICS database
(that is, all EPICS records loaded into an IOC) for info nodes named
'autosaveFields' and 'autosaveFields_pass0'; construct lists of PV
names from the associated info values, and write the PV names to the
files 'info_settings.req' and 'info_positions.req', respectively.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_makeAutosaveFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search through the EPICS database</span>
<span class="sd">    (that is, all EPICS records loaded into an IOC) for info nodes named</span>
<span class="sd">    &#39;autosaveFields&#39; and &#39;autosaveFields_pass0&#39;; construct lists of PV</span>
<span class="sd">    names from the associated info values, and write the PV names to the</span>
<span class="sd">    files &#39;info_settings.req&#39; and &#39;info_positions.req&#39;, respectively.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_manual_save" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_manual_save</span><span class="p">(</span><span class="n">request_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Cause current PV values for the request file to be saved. Any request
file named in a create_xxx_set() command can be saved manually.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_manual_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cause current PV values for the request file to be saved. Any request</span>
<span class="sd">    file named in a create_xxx_set() command can be saved manually.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_reload_manual_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_reload_manual_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macrostring</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>This function allows you to change the PV's associated with a save set
created by create_manual_set().</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_reload_manual_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">macrostring</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function allows you to change the PV&#39;s associated with a save set</span>
<span class="sd">    created by create_manual_set().</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_reload_monitor_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_reload_monitor_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>This function allows you to change the PV's and the period associated
with a save set created by create_monitor_set().</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_reload_monitor_set</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function allows you to change the PV&#39;s and the period associated</span>
<span class="sd">    with a save set created by create_monitor_set().</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_reload_periodic_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_reload_periodic_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>This function allows you to change the PV's and the period associated
with a save set created by create_periodic_set().</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_reload_periodic_set</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function allows you to change the PV&#39;s and the period associated</span>
<span class="sd">    with a save set created by create_periodic_set().</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_reload_triggered_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_reload_triggered_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">trigger_channel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>This function allows you to change the PV's and the trigger channel
associated with a save set created by create_triggered_set().</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_reload_triggered_set</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">trigger_channel</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function allows you to change the PV&#39;s and the trigger channel</span>
<span class="sd">    associated with a save set created by create_triggered_set().</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_remove_data_set" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_remove_data_set</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>If a save set has been created for request_file, this function will delete it.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_remove_data_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If a save set has been created for request_file, this function will delete it.&quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_CAReconnect" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_CAReconnect</span><span class="p">(</span><span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Specify whether autosave should periodically retry connecting to PVs
whose initial connection attempt failed. Currently, the
connection-retry interval is hard-wired at 60 seconds.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_CAReconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify whether autosave should periodically retry connecting to PVs</span>
<span class="sd">    whose initial connection attempt failed. Currently, the</span>
<span class="sd">    connection-retry interval is hard-wired at 60 seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ca_reconnect</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">ok</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_CallbackTimeout" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_CallbackTimeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Specify the time interval in seconds between forced save-file writes.
(-1 means forever). This is intended to get save files written even if
the normal trigger mechanism is broken.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_CallbackTimeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the time interval in seconds between forced save-file writes.</span>
<span class="sd">    (-1 means forever). This is intended to get save files written even if</span>
<span class="sd">    the normal trigger mechanism is broken.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">callback_timeout</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_DatedBackupFiles" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_DatedBackupFiles</span><span class="p">(</span><span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Sets the value of (int) save_restoreDatedBackupFiles (initially 1). If
zero, the backup file written at reboot time
(a copy of the file from which PV values are restored) will have the
suffix '.bu', and will be overwritten every reboot. If nonzero, each
reboot will leave behind its own backup file.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_DatedBackupFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the value of (int) save_restoreDatedBackupFiles (initially 1). If</span>
<span class="sd">    zero, the backup file written at reboot time</span>
<span class="sd">    (a copy of the file from which PV values are restored) will have the</span>
<span class="sd">    suffix &#39;.bu&#39;, and will be overwritten every reboot. If nonzero, each</span>
<span class="sd">    reboot will leave behind its own backup file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dated_backups</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">ok</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_Debug" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_Debug</span><span class="p">(</span><span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Sets the value (int) save_restoreDebug (initially 0). Increase to get
more informational messages printed to the console.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_Debug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the value (int) save_restoreDebug (initially 0). Increase to get</span>
<span class="sd">    more informational messages printed to the console.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_FilePermissions" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_FilePermissions</span><span class="p">(</span><span class="n">permissions</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Specify the file permissions used to create new .sav files. This
integer value will be supplied, exactly as given, to the system call,
open(), and to the call fchmod(). Typically, file permissions are set
with an octal number, such as 0640, and
save_restoreSet_FilePermissions() will confirm any number given to it
by echoing it to the console as an octal number.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_FilePermissions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">permissions</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the file permissions used to create new .sav files. This</span>
<span class="sd">    integer value will be supplied, exactly as given, to the system call,</span>
<span class="sd">    open(), and to the call fchmod(). Typically, file permissions are set</span>
<span class="sd">    with an octal number, such as 0640, and</span>
<span class="sd">    save_restoreSet_FilePermissions() will confirm any number given to it</span>
<span class="sd">    by echoing it to the console as an octal number.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">file_permissions</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">permissions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_IncompleteSetsOk" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_IncompleteSetsOk</span><span class="p">(</span><span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Sets the value of (int) save_restoreIncompleteSetsOk (initially 1). If
set to zero, save files will not be restored at boot time unless they
are perfect, and they will not be overwritten at save time unless a
valid CA connection and value exists for every PV in the list.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_IncompleteSetsOk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the value of (int) save_restoreIncompleteSetsOk (initially 1). If</span>
<span class="sd">    set to zero, save files will not be restored at boot time unless they</span>
<span class="sd">    are perfect, and they will not be overwritten at save time unless a</span>
<span class="sd">    valid CA connection and value exists for every PV in the list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">incomplete_sets_ok</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">ok</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_NFSHost" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_NFSHost</span><span class="p">(</span><span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">mntpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Specifies the name and IP address of the NFS host. If both have been
specified, and set_savefile_path() has been called to specify the file
path, save_restore will manage its own NFS mount. This allows
save_restore to recover from a reboot of the NFS host
(that is, a stale file handle) and from some kinds of tampering with
the save_restore directory.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_NFSHost</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">address</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">mntpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specifies the name and IP address of the NFS host. If both have been</span>
<span class="sd">    specified, and set_savefile_path() has been called to specify the file</span>
<span class="sd">    path, save_restore will manage its own NFS mount. This allows</span>
<span class="sd">    save_restore to recover from a reboot of the NFS host</span>
<span class="sd">    (that is, a stale file handle) and from some kinds of tampering with</span>
<span class="sd">    the save_restore directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nfs_host</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;nfs://</span><span class="si">{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mntpoint</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">address</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_NumSeqFiles" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_NumSeqFiles</span><span class="p">(</span><span class="n">numSeqFiles</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Sets the value of (int) save_restoreNumSeqFiles (initially 3). This is
the number of sequenced backup files to be maintained.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_NumSeqFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numSeqFiles</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the value of (int) save_restoreNumSeqFiles (initially 3). This is</span>
<span class="sd">    the number of sequenced backup files to be maintained.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">num_seq_files</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numSeqFiles</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_seq_files</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;numSeqFiles must be between 0 and 10 inclusive.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_RetrySeconds" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_RetrySeconds</span><span class="p">(</span><span class="n">seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Specify the time delay between a failed .sav-file write and the retry
of that write. The default delay is 60 seconds. If list-PV's change
during the delay, the new values will be written.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_RetrySeconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seconds</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specify the time delay between a failed .sav-file write and the retry</span>
<span class="sd">    of that write. The default delay is 60 seconds. If list-PV&#39;s change</span>
<span class="sd">    during the delay, the new values will be written.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">retry_seconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_SeqPeriodInSeconds" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_SeqPeriodInSeconds</span><span class="p">(</span><span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Sets the value of (int) save_restoreSeqPeriodInSeconds (initially 60).
Sequenced backup files will be written with this period.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_SeqPeriodInSeconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the value of (int) save_restoreSeqPeriodInSeconds (initially 60).</span>
<span class="sd">    Sequenced backup files will be written with this period.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">seq_period</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">period</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">seq_period</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;period must be 10 or greater.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_UseStatusPVs" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_UseStatusPVs</span><span class="p">(</span><span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Specifies whether save_restore should report its status to a preloaded
set of EPICS PV's (contained in the database save_restoreStatus.db). If
the argument is '0', then status PV's will not be used.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_UseStatusPVs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ok</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specifies whether save_restore should report its status to a preloaded</span>
<span class="sd">    set of EPICS PV&#39;s (contained in the database save_restoreStatus.db). If</span>
<span class="sd">    the argument is &#39;0&#39;, then status PV&#39;s will not be used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">use_status_pvs</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">ok</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_periodicDatedBackups" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_periodicDatedBackups</span><span class="p">(</span><span class="n">periodMinutes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Sets the value of (int) save_restoreDatedBackupFiles (initially 1). If
zero, the backup file written at reboot time
(a copy of the file from which PV values are restored) will have the
suffix '.bu', and will be overwritten every reboot. If nonzero, each
reboot will leave behind its own backup file.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_periodicDatedBackups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">periodMinutes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the value of (int) save_restoreDatedBackupFiles (initially 1). If</span>
<span class="sd">    zero, the backup file written at reboot time</span>
<span class="sd">    (a copy of the file from which PV values are restored) will have the</span>
<span class="sd">    suffix &#39;.bu&#39;, and will be overwritten every reboot. If nonzero, each</span>
<span class="sd">    reboot will leave behind its own backup file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dated_backups</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">date_period_minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">periodMinutes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreSet_status_prefix" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreSet_status_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Specifies the prefix to be used to construct the names of PV's with
which save_restore reports its status. If you want autosave to update
status PVs as it operates, you must call this function and load the
database save_restoreStatus.db, specifying the same prefix in both
commands.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreSet_status_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specifies the prefix to be used to construct the names of PV&#39;s with</span>
<span class="sd">    which save_restore reports its status. If you want autosave to update</span>
<span class="sd">    status PVs as it operates, you must call this function and load the</span>
<span class="sd">    database save_restoreStatus.db, specifying the same prefix in both</span>
<span class="sd">    commands.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_prefix</span> <span class="o">=</span> <span class="n">prefix</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_save_restoreShow" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_save_restoreShow</span><span class="p">(</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Show the save restore status.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_save_restoreShow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Show the save restore status.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sets</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_set_pass0_restoreFile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_set_pass0_restoreFile</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>This function specifies a save file to be restored during iocInit,
before record initialization. An unlimited number of files can be
specified using calls to this function. If the file name begins with
"/", autosave will use it as specified; otherwise, autosave will
prepend the file path specified to set_savefile_path(). The second
argument is optional.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_set_pass0_restoreFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function specifies a save file to be restored during iocInit,</span>
<span class="sd">    before record initialization. An unlimited number of files can be</span>
<span class="sd">    specified using calls to this function. If the file name begins with</span>
<span class="sd">    &quot;/&quot;, autosave will use it as specified; otherwise, autosave will</span>
<span class="sd">    prepend the file path specified to set_savefile_path(). The second</span>
<span class="sd">    argument is optional.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">restore_files</span><span class="p">[</span><span class="n">file</span><span class="p">]</span> <span class="o">=</span> <span class="n">AutosaveRestorePassFile</span><span class="p">(</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_load_context</span><span class="p">(),</span>
        <span class="n">save_filename</span><span class="o">=</span><span class="n">file</span><span class="p">,</span>
        <span class="n">macros</span><span class="o">=</span><span class="n">macros_from_string</span><span class="p">(</span><span class="n">macro_string</span><span class="p">),</span>
        <span class="n">pass_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;autosave&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Added pass 0 restore file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">save_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_set_pass1_restoreFile" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_set_pass1_restoreFile</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>This function specifies a save file to be restored during iocInit,
after record initialization. An unlimited number of files can be
specified using calls to this function. If the file name begins with
"/", autosave will use it as specified; otherwise, autosave will
prepend the file path specified to set_savefile_path(). The second
argument is optional.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_set_pass1_restoreFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function specifies a save file to be restored during iocInit,</span>
<span class="sd">    after record initialization. An unlimited number of files can be</span>
<span class="sd">    specified using calls to this function. If the file name begins with</span>
<span class="sd">    &quot;/&quot;, autosave will use it as specified; otherwise, autosave will</span>
<span class="sd">    prepend the file path specified to set_savefile_path(). The second</span>
<span class="sd">    argument is optional.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">restore_files</span><span class="p">[</span><span class="n">file</span><span class="p">]</span> <span class="o">=</span> <span class="n">AutosaveRestorePassFile</span><span class="p">(</span>
        <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_load_context</span><span class="p">(),</span>
        <span class="n">save_filename</span><span class="o">=</span><span class="n">file</span><span class="p">,</span>
        <span class="n">macros</span><span class="o">=</span><span class="n">macros_from_string</span><span class="p">(</span><span class="n">macro_string</span><span class="p">),</span>
        <span class="n">pass_number</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;autosave&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Added pass 1 restore file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">save_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_set_saveTask_priority" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_set_saveTask_priority</span><span class="p">(</span><span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Set the priority of the save_restore task.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_set_saveTask_priority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the priority of the save_restore task.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">task_priority</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">priority</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_set_savefile_name" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_set_savefile_name</span><span class="p">(</span><span class="n">request_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">save_filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>If a save set has already been created for the request file, this
function will change the save file name.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_set_savefile_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">save_filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If a save set has already been created for the request file, this</span>
<span class="sd">    function will change the save file name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">set_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sets</span><span class="p">[</span><span class="n">request_file</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Request file not configured&quot;</span><span class="p">)</span>

    <span class="n">set_</span><span class="o">.</span><span class="n">save_filename</span> <span class="o">=</span> <span class="n">save_filename</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.autosave.AutosaveState.handle_set_savefile_path" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">autosave</span><span class="o">.</span><span class="n">AutosaveState</span><span class="o">.</span><span class="n">handle_set_savefile_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">subpath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Called before iocInit(), this function specifies the path to be
prepended to save-file and restore-file names. pathsub, if present,
will be appended to path, if present, with a separating '/', whether or
not path ends or pathsub begins with '/'. If the result does not end in
'/', one will be appended to it.</p>
<p>If save_restore is managing its own NFS mount, this function specifies
the mount point, and calling it will result in an NFS mount if all
other requirements have already been met. If a valid NFS mount already
exists, the file system will be dismounted and then mounted with the
new path name. This function can be called at any time.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/autosave.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@_handler</span>
<span class="k">def</span> <span class="nf">handle_set_savefile_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">subpath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Called before iocInit(), this function specifies the path to be</span>
<span class="sd">    prepended to save-file and restore-file names. pathsub, if present,</span>
<span class="sd">    will be appended to path, if present, with a separating &#39;/&#39;, whether or</span>
<span class="sd">    not path ends or pathsub begins with &#39;/&#39;. If the result does not end in</span>
<span class="sd">    &#39;/&#39;, one will be appended to it.</span>

<span class="sd">    If save_restore is managing its own NFS mount, this function specifies</span>
<span class="sd">    the mount point, and calling it will result in an NFS mount if all</span>
<span class="sd">    other requirements have already been met. If a valid NFS mount already</span>
<span class="sd">    exists, the file system will be dismounted and then mounted with the</span>
<span class="sd">    new path name. This function can be called at any time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">/</span> <span class="n">subpath</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_handler</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_handler</span><span class="o">.</span><span class="n">_fix_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
<h4 id="whatrecord.autosave-functions">Functions</h4>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




<h3 id="whatrecord.db" class="doc doc-heading">
          <code>whatrecord.db</code>


</h3>

  <div class="doc doc-contents first">

  

  <div class="doc doc-children">






<h4 id="whatrecord.db-classes">Classes</h4>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.db.Database" class="doc doc-heading">
          <code>whatrecord.db.Database</code>


</h5>


  <div class="doc doc-contents ">

  
      <p>Representation of an EPICS database, database definition, or both.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>standalone_aliases</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Standalone aliases are those defined outside of the record body; this
may only be useful for faithfully reconstructing the Database according
to its original source code.  Keyed on alias to actual record name.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
      <p>aliases : Dict[str, str]
    Alias name to record name.</p>
<p>paths : List[str]
    The path command specifies the current search path for use when loading
    database and database definition files. The addpath appends directory
    names to the current path. The path is used to locate the initial
    database file and included files. An empty dir at the beginning,
    middle, or end of a non-empty path string means the current directory.</p>
<p>addpaths : List[str]
    See 'paths' above.</p>
<p>breaktables : Dict[str, List[str]]
    Breakpoint table (look-up table) of raw-to-engineering values.</p>
<p>comments : List[str]
    Comments encountered while parsing the database.</p>
<p>devices : List[DatabaseDevice]
    Device support declarations (dset).</p>
<p>drivers : List[str]
    Driver declarations (drvet).</p>
<p>functions : List[str]
    Exported C function names.</p>
<p>includes : List[str]
    Inline inclusion. Not supported just yet.</p>
<p>links : Dict[str, str]
    Links.</p>
<p>menus : Dict[str, DatabaseMenu]
    Named value enumerations (enums).</p>
<p>records : Dict[str, RecordInstance]
    Record name to RecordInstance.</p>
<p>record_types : Dict[str, RecordType]
    Record type name to RecordType.</p>
<p>registrars : List[str]
    Exported registrar function name.</p>
<p>variables : Dict[str, Optional[str]]
    IOC shell variables.</p>
<p>lint : DatabaseLint
    Any lint found when loading the database.</p>


  

  <div class="doc doc-children">





<h6 id="whatrecord.db.Database-attributes">Attributes</h6>

<div class="doc doc-object doc-attribute">




<h7 id="whatrecord.db.Database.all_aliases" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">all_aliases</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>All aliases: top-level-defined and per-instance-defined.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="whatrecord.db.Database.non_aliased_records" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">non_aliased_records</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RecordInstance</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Get unique and non-aliased record instances.</p>
<p>This can be used to ignore records included by the <code>include_aliases</code>
setting.</p>
  </div>

</div>

<h6 id="whatrecord.db.Database-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.add_or_update_record" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">add_or_update_record</span><span class="p">(</span><span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Update (or add) records given a dictionary of records.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_or_update_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update (or add) records given a dictionary of records.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">is_pva</span><span class="p">:</span>
        <span class="n">existing_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pva_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">existing_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">existing_record</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">record</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">existing_record</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.append" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n">Database</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Append the other database, best-effort updating existing entries.</p>
<p>This is not likely to do everything correctly (TODO).</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Database</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Append the other database, best-effort updating existing entries.</span>

<span class="sd">    This is not likely to do everything correctly (TODO).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_or_update_record</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">pva_groups</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_or_update_record</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_list</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">this</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">other</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">this</span><span class="p">])</span>

    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addpaths</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">addpaths</span><span class="p">)</span>
    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span>
    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">devices</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">devices</span><span class="p">)</span>
    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">drivers</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">drivers</span><span class="p">)</span>
    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">functions</span><span class="p">)</span>
    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">includes</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">includes</span><span class="p">)</span>
    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paths</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">paths</span><span class="p">)</span>
    <span class="n">_update_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registrars</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">registrars</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">aliases</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">aliases</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">breaktables</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">breaktables</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">links</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">menus</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">menus</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">record_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">record_types</span> <span class="ow">or</span> <span class="p">{})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">standalone_aliases</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">standalone_aliases</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.field_names_by_type" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">field_names_by_type</span><span class="p">(</span><span class="n">field_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Generate dictionary of record type to frozenset of field names.</p>
<p>This can be used in scenarios where database definition files are
unavailable and link information is requested.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>field_types</code></td>
          <td>
                <code>list of str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Field types to look for.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">field_names_by_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">field_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">FrozenSet</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate dictionary of record type to frozenset of field names.</span>

<span class="sd">    This can be used in scenarios where database definition files are</span>
<span class="sd">    unavailable and link information is requested.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    field_types : list of str</span>
<span class="sd">        Field types to look for.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">by_rtype</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">rtype</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">record_types</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">by_rtype</span><span class="p">[</span><span class="n">rtype</span><span class="p">]</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span>
            <span class="n">field</span><span class="o">.</span><span class="n">name</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">field_types</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">by_rtype</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.from_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">],</span> <span class="n">dbd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Database</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">macro_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MacroContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">include_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a database [definition] from a filename.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>fn</code></td>
          <td>
                <code>str or <span title="pathlib.Path">Path</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The path to the database file.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dbd</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="whatrecord.db.Database" href="#whatrecord.db.Database">Database</a>, str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The database definition (.dbd) path, if applicable and available.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>macro_context</code></td>
          <td>
                <code><span title="whatrecord.macro.MacroContext">MacroContext</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A macro context to use for expanding macros while loading the
database.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The epics-base version to assume when loading.  Use 3 for R3.15 and under,
4 for more recent versions.</p>
            </div>
          </td>
          <td>
                <code>4</code>
          </td>
        </tr>
        <tr>
          <td><code>include_aliases</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Include aliases as top-level records.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.db.Database" href="#whatrecord.db.Database">Database</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">fn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">],</span>
    <span class="n">dbd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Database</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">macro_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MacroContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">include_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a database [definition] from a filename.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fn : str or pathlib.Path</span>
<span class="sd">        The path to the database file.</span>
<span class="sd">    dbd : Union[Database, str, pathlib.Path], optional</span>
<span class="sd">        The database definition (.dbd) path, if applicable and available.</span>
<span class="sd">    macro_context : MacroContext, optional</span>
<span class="sd">        A macro context to use for expanding macros while loading the</span>
<span class="sd">        database.</span>
<span class="sd">    version : int, optional</span>
<span class="sd">        The epics-base version to assume when loading.  Use 3 for R3.15 and under,</span>
<span class="sd">        4 for more recent versions.</span>
<span class="sd">    include_aliases : bool, optional</span>
<span class="sd">        Include aliases as top-level records.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
            <span class="n">filename</span><span class="o">=</span><span class="n">fn</span><span class="p">,</span>
            <span class="n">dbd</span><span class="o">=</span><span class="n">dbd</span><span class="p">,</span>
            <span class="n">macro_context</span><span class="o">=</span><span class="n">macro_context</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
            <span class="n">include_aliases</span><span class="o">=</span><span class="n">include_aliases</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.from_file_obj" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">dbd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Database</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">macro_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MacroContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">include_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a database [definition] from a file object.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>fp</code></td>
          <td>
                <code>file or file-like object</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The file object to read from.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dbd</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="whatrecord.db.Database" href="#whatrecord.db.Database">Database</a>, str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The database definition (.dbd) path, if applicable and available.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The filename to associate with the contents.  Defaults to
<code>fp.name</code>, if available.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>macro_context</code></td>
          <td>
                <code><span title="whatrecord.macro.MacroContext">MacroContext</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A macro context to use for expanding macros while loading the
database.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The epics-base version to assume when loading.  Use 3 for R3.15 and under,
4 for more recent versions.</p>
            </div>
          </td>
          <td>
                <code>4</code>
          </td>
        </tr>
        <tr>
          <td><code>include_aliases</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Include aliases as top-level records.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.db.Database" href="#whatrecord.db.Database">Database</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file_obj</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">fp</span><span class="p">,</span>
    <span class="n">dbd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Database</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">macro_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MacroContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">include_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a database [definition] from a file object.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fp : file or file-like object</span>
<span class="sd">        The file object to read from.</span>
<span class="sd">    dbd : Union[Database, str, pathlib.Path], optional</span>
<span class="sd">        The database definition (.dbd) path, if applicable and available.</span>
<span class="sd">    filename : Union[str, pathlib.Path], optional</span>
<span class="sd">        The filename to associate with the contents.  Defaults to</span>
<span class="sd">        ``fp.name``, if available.</span>
<span class="sd">    macro_context : MacroContext, optional</span>
<span class="sd">        A macro context to use for expanding macros while loading the</span>
<span class="sd">        database.</span>
<span class="sd">    version : int, optional</span>
<span class="sd">        The epics-base version to assume when loading.  Use 3 for R3.15 and under,</span>
<span class="sd">        4 for more recent versions.</span>
<span class="sd">    include_aliases : bool, optional</span>
<span class="sd">        Include aliases as top-level records.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">dbd</span><span class="o">=</span><span class="n">dbd</span><span class="p">,</span>
        <span class="n">macro_context</span><span class="o">=</span><span class="n">macro_context</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
        <span class="n">include_aliases</span><span class="o">=</span><span class="n">include_aliases</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.from_multiple" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">from_multiple</span><span class="p">(</span><span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">_DatabaseSource</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Create a Database instance from multiple sources, including:</p>
<ul>
<li>Other Database instances</li>
<li>LoadedIoc</li>
<li>ShellState</li>
</ul>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_multiple</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">_DatabaseSource</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a Database instance from multiple sources, including:</span>

<span class="sd">    * Other Database instances</span>
<span class="sd">    * LoadedIoc</span>
<span class="sd">    * ShellState</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.shell</span> <span class="kn">import</span> <span class="n">LoadedIoc</span><span class="p">,</span> <span class="n">ShellState</span>

    <span class="n">db</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Database</span><span class="p">):</span>
            <span class="n">db</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">LoadedIoc</span><span class="p">,</span> <span class="n">ShellState</span><span class="p">)):</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">shell_state</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">LoadedIoc</span><span class="p">)</span> <span class="k">else</span> <span class="n">item</span>
            <span class="n">new_records</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">pva_database</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">new_records</span><span class="p">:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">add_or_update_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">aliases</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">aliases</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected </span><span class="si">{</span><span class="n">_DatabaseSource</span><span class="si">}</span><span class="s2">, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">db</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.from_string" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dbd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Database</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">macro_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MacroContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">include_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a database [definition] from a string.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>contents</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The contents of the database file.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dbd</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="whatrecord.db.Database" href="#whatrecord.db.Database">Database</a>, str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The database definition (.dbd) path, if applicable and available.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The filename to associate with the contents.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>macro_context</code></td>
          <td>
                <code><span title="whatrecord.macro.MacroContext">MacroContext</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A macro context to use for expanding macros while loading the
database.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The epics-base version to assume when loading.  Use 3 for R3.15 and under,
4 for more recent versions.</p>
            </div>
          </td>
          <td>
                <code>4</code>
          </td>
        </tr>
        <tr>
          <td><code>include_aliases</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Include aliases as top-level records.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.db.Database" href="#whatrecord.db.Database">Database</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dbd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Database</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">macro_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MacroContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">include_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a database [definition] from a string.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    contents : str</span>
<span class="sd">        The contents of the database file.</span>
<span class="sd">    dbd : Union[Database, str, pathlib.Path], optional</span>
<span class="sd">        The database definition (.dbd) path, if applicable and available.</span>
<span class="sd">    filename : Union[str, pathlib.Path], optional</span>
<span class="sd">        The filename to associate with the contents.</span>
<span class="sd">    macro_context : MacroContext, optional</span>
<span class="sd">        A macro context to use for expanding macros while loading the</span>
<span class="sd">        database.</span>
<span class="sd">    version : int, optional</span>
<span class="sd">        The epics-base version to assume when loading.  Use 3 for R3.15 and under,</span>
<span class="sd">        4 for more recent versions.</span>
<span class="sd">    include_aliases : bool, optional</span>
<span class="sd">        Include aliases as top-level records.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dbd</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dbd</span><span class="p">,</span> <span class="n">Database</span><span class="p">):</span>
        <span class="n">dbd</span> <span class="o">=</span> <span class="n">Database</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">dbd</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">grammar</span> <span class="o">=</span> <span class="n">lark</span><span class="o">.</span><span class="n">Lark</span><span class="o">.</span><span class="n">open_from_package</span><span class="p">(</span>
        <span class="s2">&quot;whatrecord&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;db.v</span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">.lark&quot;</span><span class="p">,</span>
        <span class="n">search_paths</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;grammar&quot;</span><span class="p">,</span> <span class="p">),</span>
        <span class="n">parser</span><span class="o">=</span><span class="s2">&quot;lalr&quot;</span><span class="p">,</span>
        <span class="n">lexer_callbacks</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;COMMENT&quot;</span><span class="p">:</span> <span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">},</span>
        <span class="n">transformer</span><span class="o">=</span><span class="n">_DatabaseTransformer</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dbd</span><span class="o">=</span><span class="n">dbd</span><span class="p">),</span>
        <span class="n">maybe_placeholders</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="c1"># Per-user `gettempdir` caching of the LALR grammar analysis way of</span>
        <span class="c1"># passing ``True`` here:</span>
        <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">macro_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">macro_context</span><span class="o">.</span><span class="n">expand_by_line</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="n">db</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Database</span><span class="p">,</span> <span class="n">grammar</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">contents</span><span class="p">))</span>
    <span class="n">db</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="n">comments</span>

    <span class="k">if</span> <span class="n">include_aliases</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">record_name</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">aliases</span><span class="p">:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">records</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">record</span>

    <span class="k">return</span> <span class="n">db</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.from_vendored_dbd" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">from_vendored_dbd</span><span class="p">(</span><span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load the vendored database definition file from whatrecord.</p>
<p>This is a good fallback when you have a database file without a
corresponding database definition file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>version</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Use the old V3 style or new V3 style database grammar by specifying
3 or 4, respectively.  Defaults to 3.</p>
            </div>
          </td>
          <td>
                <code>3</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>db</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.db.Database" href="#whatrecord.db.Database">Database</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_vendored_dbd</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load the vendored database definition file from whatrecord.</span>

<span class="sd">    This is a good fallback when you have a database file without a</span>
<span class="sd">    corresponding database definition file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    version : int, optional</span>
<span class="sd">        Use the old V3 style or new V3 style database grammar by specifying</span>
<span class="sd">        3 or 4, respectively.  Defaults to 3.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    db : Database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">version</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span>
            <span class="n">util</span><span class="o">.</span><span class="n">MODULE_PATH</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;iocs/v3_softIoc.dbd&quot;</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span>
        <span class="n">util</span><span class="o">.</span><span class="n">MODULE_PATH</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;iocs&quot;</span> <span class="o">/</span> <span class="s2">&quot;softIoc.dbd&quot;</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.get_links_for_record" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">get_links_for_record</span><span class="p">(</span><span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">RecordField</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Get all links - in, out, and forward links.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>record</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.common.RecordInstance" href="../utilities/#whatrecord.common.RecordInstance">RecordInstance</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Additional information, if the database definition wasn't loaded
with this instance.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>field</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.common.RecordField" href="../utilities/#whatrecord.common.RecordField">RecordField</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
        <tr>
<td><code>link_text</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
        <tr>
<td><code>link_info</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_links_for_record</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">RecordField</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get all links - in, out, and forward links.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    record : RecordInstance</span>
<span class="sd">        Additional information, if the database definition wasn&#39;t loaded</span>
<span class="sd">        with this instance.</span>

<span class="sd">    Yields</span>
<span class="sd">    ------</span>
<span class="sd">    field : RecordField</span>
<span class="sd">    link_text: str</span>
<span class="sd">    link_info: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">record_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">record_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">record_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">record_info</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">yield from</span> <span class="n">record_info</span><span class="o">.</span><span class="n">get_links_for_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.db.Database.shallow_copy" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">shallow_copy</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Database</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>A shallow copy of the database with new dictionaries/lists.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">shallow_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A shallow copy of the database with new dictionaries/lists.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span>
        <span class="n">addpaths</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addpaths</span><span class="p">),</span>
        <span class="n">aliases</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aliases</span><span class="p">),</span>
        <span class="n">breaktables</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">breaktables</span><span class="p">),</span>
        <span class="n">comments</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">),</span>
        <span class="n">devices</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">devices</span><span class="p">),</span>
        <span class="n">drivers</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">drivers</span><span class="p">),</span>
        <span class="n">functions</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">),</span>
        <span class="n">includes</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">includes</span><span class="p">),</span>
        <span class="n">links</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">),</span>
        <span class="n">menus</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">menus</span><span class="p">),</span>
        <span class="n">paths</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paths</span><span class="p">),</span>
        <span class="n">pva_groups</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pva_groups</span><span class="p">),</span>
        <span class="n">record_types</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">record_types</span><span class="p">),</span>
        <span class="n">records</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">records</span><span class="p">),</span>
        <span class="n">registrars</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registrars</span><span class="p">),</span>
        <span class="n">standalone_aliases</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">standalone_aliases</span><span class="p">),</span>
        <span class="n">variables</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">),</span>
        <span class="n">lint</span><span class="o">=</span><span class="n">DatabaseLint</span><span class="p">(</span>
            <span class="n">warnings</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lint</span><span class="o">.</span><span class="n">warnings</span><span class="p">),</span>
            <span class="n">errors</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lint</span><span class="o">.</span><span class="n">errors</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.db.DatabaseLint" class="doc doc-heading">
          <code>whatrecord.db.DatabaseLint</code>


</h5>


  <div class="doc doc-contents ">

  
      <p>Container for dbdlint results, with easier-to-access attributes.</p>
<p>Reimplementation of <code>pyPDB.dbdlint.Results</code>.</p>
<p>Each error or warning has dictionary keys::</p>
<pre><code>{name, message, file, line, raw_message, format_args}
</code></pre>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>errors</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of errors found</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>warnings</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of warnings found</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.db.DatabaseLoadFailure" class="doc doc-heading">
          <code>whatrecord.db.DatabaseLoadFailure</code>


</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>Exception</code></p>

  
      <p>Database load failure.</p>


  </div>

</div>
<h4 id="whatrecord.db-functions">Functions</h4>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.db.split_record_and_field" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">split_record_and_field</span><span class="p">(</span><span class="n">pvname</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

</h5>


  <div class="doc doc-contents ">
  
      <p>Split REC.FLD into REC and FLD.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/db.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">split_record_and_field</span><span class="p">(</span><span class="n">pvname</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Split REC.FLD into REC and FLD.&quot;&quot;&quot;</span>
    <span class="n">record</span><span class="p">,</span> <span class="o">*</span><span class="n">field</span> <span class="o">=</span> <span class="n">pvname</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span><span class="p">,</span> <span class="n">field</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">field</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




<h3 id="whatrecord.dbtemplate" class="doc doc-heading">
          <code>whatrecord.dbtemplate</code>


</h3>

  <div class="doc doc-contents first">
  
      <p>dbLoadTemplate and msi -S substitution grammar helpers.</p>

  

  <div class="doc doc-children">






<h4 id="whatrecord.dbtemplate-classes">Classes</h4>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.dbtemplate.GlobalDefinitions" class="doc doc-heading">
          <code>whatrecord.dbtemplate.GlobalDefinitions</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="whatrecord.dbtemplate.VariableDefinitions" href="#whatrecord.dbtemplate.VariableDefinitions">VariableDefinitions</a></code></p>

  
      <p>Global variable definitions.</p>


  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.dbtemplate.PatternHeader" class="doc doc-heading">
          <code>whatrecord.dbtemplate.PatternHeader</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Pattern header.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.dbtemplate.PatternValues" class="doc doc-heading">
          <code>whatrecord.dbtemplate.PatternValues</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Pattern values.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.dbtemplate.Substitution" class="doc doc-heading">
          <code>whatrecord.dbtemplate.Substitution</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Single database template file from a full template.</p>
<p>Represents approximately one line of a .substitutions file. For example,
in this substitution file,</p>
<pre><code>    file template.txt {
        pattern {a, b, c}
        {A, B, C}
    }
</code></pre>
<p>The resulting Substitution would be</p>
<p><code>Substitution(macros={"a": "A", "b": "B", "c": "C"}, filename="template.txt")</code>.</p>
<p>Global macro values will be aggregated into this dictionary.</p>
<p>Inside of the template file - <code>template.txt</code> above:
* "include" is a supported command for the template file.
* "substitute" is optionally supported (set <code>allow_substitute</code>)</p>


  

  <div class="doc doc-children">





<h6 id="whatrecord.dbtemplate.Substitution-attributes">Attributes</h6>

<div class="doc doc-object doc-attribute">




<h7 id="whatrecord.dbtemplate.Substitution.macro_context" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">Substitution</span><span class="o">.</span><span class="n">macro_context</span><span class="p">:</span> <span class="n">MacroContext</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>The macro context to be used when expanding the template.</p>
  </div>

</div>

<h6 id="whatrecord.dbtemplate.Substitution-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.Substitution.expand" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">Substitution</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Expand the provided substitution template, using the macro environment.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>source</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The source substitution template.  May contain "include" or
"substitute" lines.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>search_paths : list of str or pathlib.Path, optional
    List of paths to search for template files.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Expand the provided substitution template, using the macro environment.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    source : str</span>
<span class="sd">        The source substitution template.  May contain &quot;include&quot; or</span>
<span class="sd">        &quot;substitute&quot; lines.</span>

<span class="sd">    search_paths : list of str or pathlib.Path, optional</span>
<span class="sd">        List of paths to search for template files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">macro_context</span>
    <span class="n">search_paths</span> <span class="o">=</span> <span class="n">search_paths</span> <span class="ow">or</span> <span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">source_stack</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
    <span class="k">while</span> <span class="n">source_stack</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">source_stack</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;line </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">command</span><span class="p">,</span> <span class="o">*</span><span class="n">command_args</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;include&quot;</span><span class="p">:</span>  <span class="c1"># case sensitive</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">command_args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Include command takes one argument; got: </span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;where line=</span><span class="si">{</span><span class="n">line</span><span class="si">!r}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">include_file</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Including file from </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">include_file</span><span class="p">)</span>
            <span class="n">include_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_include</span><span class="p">(</span><span class="n">include_file</span><span class="p">,</span> <span class="n">search_paths</span><span class="p">)</span>
            <span class="n">source_stack</span><span class="o">.</span><span class="n">extendleft</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">include_source</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;stack </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">source_stack</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;substitute&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_substitute</span><span class="p">:</span>
            <span class="c1"># Note that dbLoadTemplate does not support substitute, but msi</span>
            <span class="c1"># does.</span>
            <span class="n">macro_string</span> <span class="o">=</span> <span class="n">command_args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="c1"># Strip only single beginning and end quotes</span>
            <span class="n">macro_string</span> <span class="o">=</span> <span class="n">_strip_double_quote</span><span class="p">(</span><span class="n">macro_string</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Substituting additional macros </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">macro_string</span><span class="p">)</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">define_from_string</span><span class="p">(</span><span class="n">macro_string</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.Substitution.expand_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">Substitution</span><span class="o">.</span><span class="n">expand_file</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Expand the given file, looking in <code>search_paths</code> for template files.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Expand this file or fall back to the instance-defined filename.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>search_paths : list of str or pathlib.Path, optional
    List of paths to search for template files.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">expand_file</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Expand the given file, looking in ``search_paths`` for template files.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str, optional</span>
<span class="sd">        Expand this file or fall back to the instance-defined filename.</span>

<span class="sd">    search_paths : list of str or pathlib.Path, optional</span>
<span class="sd">        List of paths to search for template files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This substitution does not have a file defined&quot;</span><span class="p">)</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">search_paths</span> <span class="o">=</span> <span class="n">search_paths</span> <span class="ow">or</span> <span class="p">[</span><span class="n">filename</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">search_paths</span><span class="o">=</span><span class="n">search_paths</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.Substitution.handle_include" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">Substitution</span><span class="o">.</span><span class="n">handle_include</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_paths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Expand include files from the given search path.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">handle_include</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_paths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Expand include files from the given search path.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">search_paths</span><span class="p">:</span>
        <span class="n">option</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">/</span> <span class="n">filename</span>
        <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">friendly_paths</span> <span class="o">=</span> <span class="s2">&quot; or &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1">&quot;&#39;</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">search_paths</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> not found in </span><span class="si">{</span><span class="n">friendly_paths</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.dbtemplate.TemplateSubstitution" class="doc doc-heading">
          <code>whatrecord.dbtemplate.TemplateSubstitution</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Database substitutions, containing zero or more template files.</p>


  

  <div class="doc doc-children">







<h6 id="whatrecord.dbtemplate.TemplateSubstitution-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.TemplateSubstitution.expand_files" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">TemplateSubstitution</span><span class="o">.</span><span class="n">expand_files</span><span class="p">(</span><span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Expands and combines all contained substitution files.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>delimiter</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Delimiter to join individual substitutions.</p>
            </div>
          </td>
          <td>
                <code>&#39;\n&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>search_paths : list of str or pathlib.Path, optional
    List of paths to search for template files.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">expand_files</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Expands and combines all contained substitution files.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    delimiter : str, optional</span>
<span class="sd">        Delimiter to join individual substitutions.</span>

<span class="sd">    search_paths : list of str or pathlib.Path, optional</span>
<span class="sd">        List of paths to search for template files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">expand_file</span><span class="p">(</span><span class="n">search_paths</span><span class="o">=</span><span class="n">search_paths</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">substitutions</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.TemplateSubstitution.expand_template" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">TemplateSubstitution</span><span class="o">.</span><span class="n">expand_template</span><span class="p">(</span><span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Expands all substitutions for the given string.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>template</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template text.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>delimiter : str, optional
    Delimiter to join individual substitutions.</p>
<p>search_paths : list of str or pathlib.Path, optional
    List of paths to search for template files.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">expand_template</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">search_paths</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Expands all substitutions for the given string.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    template : str</span>
<span class="sd">        The template text.</span>

<span class="sd">    delimiter : str, optional</span>
<span class="sd">        Delimiter to join individual substitutions.</span>

<span class="sd">    search_paths : list of str or pathlib.Path, optional</span>
<span class="sd">        List of paths to search for template files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">search_paths</span><span class="o">=</span><span class="n">search_paths</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">substitutions</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.TemplateSubstitution.from_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">TemplateSubstitution</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateSubstitution</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a template file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span> or str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The filename.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>template</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.dbtemplate.TemplateSubstitution" href="#whatrecord.dbtemplate.TemplateSubstitution">TemplateSubstitution</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template file.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fn</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateSubstitution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a template file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : pathlib.Path or str</span>
<span class="sd">        The filename.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    template : TemplateSubstitution</span>
<span class="sd">        The template file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span><span class="o">=</span><span class="n">fn</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.TemplateSubstitution.from_file_obj" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">TemplateSubstitution</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateSubstitution</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a template file given a file object.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateSubstitution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a template file given a file object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
        <span class="n">filename</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.dbtemplate.TemplateSubstitution.from_string" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">dbtemplate</span><span class="o">.</span><span class="n">TemplateSubstitution</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">msi_format</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">all_global_scope</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateSubstitution</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a template substitutions file given its string contents.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/dbtemplate.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">contents</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">msi_format</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">all_global_scope</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateSubstitution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a template substitutions file given its string contents.&quot;&quot;&quot;</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">grammar_filename</span> <span class="o">=</span> <span class="s2">&quot;msi-sub.lark&quot;</span> <span class="k">if</span> <span class="n">msi_format</span> <span class="k">else</span> <span class="s2">&quot;dbtemplate.lark&quot;</span>

    <span class="n">grammar</span> <span class="o">=</span> <span class="n">lark</span><span class="o">.</span><span class="n">Lark</span><span class="o">.</span><span class="n">open_from_package</span><span class="p">(</span>
        <span class="s2">&quot;whatrecord&quot;</span><span class="p">,</span>
        <span class="n">grammar_filename</span><span class="p">,</span>
        <span class="n">search_paths</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;grammar&quot;</span><span class="p">,),</span>
        <span class="n">parser</span><span class="o">=</span><span class="s2">&quot;earley&quot;</span><span class="p">,</span>
        <span class="c1"># TODO: This is unsupported in lark:</span>
        <span class="c1"># lexer_callbacks={&quot;COMMENT&quot;: comments.append},</span>
        <span class="n">maybe_placeholders</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">propagate_positions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">msi_format</span><span class="p">:</span>
        <span class="n">tr</span> <span class="o">=</span> <span class="n">_TemplateMsiTransformer</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">all_global_scope</span><span class="o">=</span><span class="n">all_global_scope</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tr</span> <span class="o">=</span> <span class="n">_TemplateTransformer</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="n">subs</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">grammar</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">contents</span><span class="p">))</span>
    <span class="n">subs</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="n">comments</span>
    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.dbtemplate.VariableDefinitions" class="doc doc-heading">
          <code>whatrecord.dbtemplate.VariableDefinitions</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Variable definitions.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>
<h4 id="whatrecord.dbtemplate-functions">Functions</h4>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




<h3 id="whatrecord.gateway" class="doc doc-heading">
          <code>whatrecord.gateway</code>


</h3>

  <div class="doc doc-contents first">

  

  <div class="doc doc-children">






<h4 id="whatrecord.gateway-classes">Classes</h4>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.gateway.AccessSecurity" class="doc doc-heading">
          <code>whatrecord.gateway.AccessSecurity</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>A PVList rule access security settings.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.gateway.AliasRule" class="doc doc-heading">
          <code>whatrecord.gateway.AliasRule</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="whatrecord.gateway.Rule" href="#whatrecord.gateway.Rule">Rule</a></code></p>

  
      <p>Rule to alias the pattern to a PV (or PVs).</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.gateway.AllowRule" class="doc doc-heading">
          <code>whatrecord.gateway.AllowRule</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="whatrecord.gateway.Rule" href="#whatrecord.gateway.Rule">Rule</a></code></p>

  
      <p>Rule to allow access to a PV pattern.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.gateway.DenyRule" class="doc doc-heading">
          <code>whatrecord.gateway.DenyRule</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="whatrecord.gateway.Rule" href="#whatrecord.gateway.Rule">Rule</a></code></p>

  
      <p>Rule to deny access to a PV pattern.</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.gateway.GatewayConfig" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">GatewayConfig</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">],</span> <span class="n">glob_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;*.pvlist&#39;</span><span class="p">,</span> <span class="n">pvlists</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">PVList</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">


              <details class="quote">
                <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">],</span>
    <span class="n">glob_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*.pvlist&quot;</span><span class="p">,</span>
    <span class="n">pvlists</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">PVList</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">glob_str</span> <span class="o">=</span> <span class="n">glob_str</span>
    <span class="k">if</span> <span class="n">pvlists</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pvlists</span> <span class="o">=</span> <span class="n">pvlists</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pvlists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_from_files</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>

  

  <div class="doc doc-children">







<h6 id="whatrecord.gateway.GatewayConfig-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.gateway.GatewayConfig.get_matches" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">GatewayConfig</span><span class="o">.</span><span class="n">get_matches</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">remove_any</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PVListMatches</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Get matches from any PVList given a PV name.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">remove_any</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PVListMatches</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get matches from any PVList given a PV name.&quot;&quot;&quot;</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">PVListMatch</span><span class="p">(</span>
            <span class="n">filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">fn</span><span class="p">),</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule</span><span class="p">,</span>
            <span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">fn</span><span class="p">,</span> <span class="n">pvlist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvlists</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">rule</span><span class="p">,</span> <span class="n">groups</span> <span class="ow">in</span> <span class="n">pvlist</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rule</span><span class="o">.</span><span class="n">pattern</span> <span class="o">!=</span> <span class="s2">&quot;.*&quot;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">remove_any</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">PVListMatches</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">matches</span><span class="o">=</span><span class="n">matches</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.gateway.GatewayConfig.update_changed" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">GatewayConfig</span><span class="o">.</span><span class="n">update_changed</span><span class="p">()</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Update any changed files.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update any changed files.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">filename</span><span class="p">,</span> <span class="n">pvlist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pvlists</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">get_file_sha256</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">!=</span> <span class="n">pvlist</span><span class="o">.</span><span class="n">hash</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updating changed gateway file: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.gateway.PVList" class="doc doc-heading">
          <code>whatrecord.gateway.PVList</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>A PVList container.</p>


  

  <div class="doc doc-children">







<h6 id="whatrecord.gateway.PVList-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.gateway.PVList.find" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">PVList</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Rule</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Yield matching rule types.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">find</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Rule</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield matching rule types.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rule</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">rule</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.gateway.PVList.from_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">PVList</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">])</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a PVList from a filename.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fn</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a PVList from a filename.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">fn</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.gateway.PVList.from_file_obj" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">PVList</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a PVList from a file object.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a PVList from a file object.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">fp</span><span class="p">)))</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.gateway.PVList.match" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">PVList</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Rule</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Yield matching rules.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">match</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Rule</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield matching rules.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">:</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">rule</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.gateway.Rule" class="doc doc-heading">
          <code>whatrecord.gateway.Rule</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>A PVList rule (base class).</p>


  

  <div class="doc doc-children">







<h6 id="whatrecord.gateway.Rule-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.gateway.Rule.match" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">Rule</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Match a pv name against this rule.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Match a pv name against this rule.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">regex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">regex</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
<h4 id="whatrecord.gateway-functions">Functions</h4>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.gateway.create_arg_parser" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">gateway</span><span class="o">.</span><span class="n">create_arg_parser</span><span class="p">()</span></code>

</h5>


  <div class="doc doc-contents ">
  
      <p>Create the argument parser.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/gateway.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_arg_parser</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create the argument parser.&quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;pvlist name matching and linting tool&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--lint&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Lint regular expressions&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;--pvlists&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
        <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specific pvlists to check (empty for all)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;--hide-context&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Hide comment context&quot;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;--remove-any&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Remove &#39;.*&#39; from results&quot;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;PV names to match&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




<h3 id="whatrecord.snl" class="doc doc-heading">
          <code>whatrecord.snl</code>


</h3>

  <div class="doc doc-contents first">

  

  <div class="doc doc-children">






<h4 id="whatrecord.snl-classes">Classes</h4>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.snl.InitExpression" class="doc doc-heading">
          <code>whatrecord.snl.InitExpression</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="whatrecord.snl.Expression">Expression</span></code></p>

  
      <p>Of the form:
    ( type ) { init_exprs }
    { init_exprs }
    expr</p>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.snl.SequencerProgram" class="doc doc-heading">
          <code>whatrecord.snl.SequencerProgram</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Representation of a state notation language (snl seq) program.</p>


  

  <div class="doc doc-children">







<h6 id="whatrecord.snl.SequencerProgram-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.snl.SequencerProgram.as_graph" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgram</span><span class="o">.</span><span class="n">as_graph</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgramGraph</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Create a graphviz digraph of the state notation diagram.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>graph</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.snl.SequencerProgramGraph" href="#whatrecord.snl.SequencerProgramGraph">SequencerProgramGraph</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">as_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgramGraph</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a graphviz digraph of the state notation diagram.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    graph : SequencerProgramGraph</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SequencerProgramGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.snl.SequencerProgram.from_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgram</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgram</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a state notation language file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span> or str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The filename.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>program</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.snl.SequencerProgram" href="#whatrecord.snl.SequencerProgram">SequencerProgram</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The parsed program.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fn</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgram</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a state notation language file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : pathlib.Path or str</span>
<span class="sd">        The filename.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    program : SequencerProgram</span>
<span class="sd">        The parsed program.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span><span class="o">=</span><span class="n">fn</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.snl.SequencerProgram.from_file_obj" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgram</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgram</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a state notation language program given a file object.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgram</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a state notation language program given a file object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
        <span class="n">filename</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.snl.SequencerProgram.from_string" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgram</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgram</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a state notation language file given its string contents.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">contents</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SequencerProgram</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a state notation language file given its string contents.&quot;&quot;&quot;</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">grammar</span> <span class="o">=</span> <span class="n">lark</span><span class="o">.</span><span class="n">Lark</span><span class="o">.</span><span class="n">open_from_package</span><span class="p">(</span>
        <span class="s2">&quot;whatrecord&quot;</span><span class="p">,</span>
        <span class="s2">&quot;snl.lark&quot;</span><span class="p">,</span>
        <span class="n">search_paths</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;grammar&quot;</span><span class="p">,),</span>
        <span class="n">parser</span><span class="o">=</span><span class="s2">&quot;earley&quot;</span><span class="p">,</span>
        <span class="c1"># TODO: alternative comment finding method</span>
        <span class="c1"># lexer_callbacks={&quot;COMMENT&quot;: comments.append},</span>
        <span class="n">maybe_placeholders</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">propagate_positions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">search_path</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="n">search_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>

    <span class="n">preprocessed</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">preprocess</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">search_path</span><span class="o">=</span><span class="n">search_path</span><span class="p">)</span>
    <span class="n">proto</span> <span class="o">=</span> <span class="n">_ProgramTransformer</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
        <span class="n">grammar</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">preprocessed</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">proto</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="n">comments</span>
    <span class="k">return</span> <span class="n">proto</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.snl.SequencerProgram.preprocess" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgram</span><span class="o">.</span><span class="n">preprocess</span><span class="p">(</span><span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Preprocess the given sequencer code, expanding #include.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">preprocess</span><span class="p">(</span><span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">search_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AnyPath</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Preprocess the given sequencer code, expanding #include.&quot;&quot;&quot;</span>
    <span class="c1"># Line numbers will be off with this, sadly</span>
    <span class="c1"># The sequencer itself gets around this by using LINE_MARKER tokens</span>
    <span class="c1"># to indicate what file and line the code came from.  This could</span>
    <span class="c1"># be something we support in the future, but it might not be easy</span>
    <span class="c1"># with lark...</span>
    <span class="n">search_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="k">if</span> <span class="n">search_path</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">search_path</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">([(</span><span class="n">search_path</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">code</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()])</span>
    <span class="k">while</span> <span class="n">stack</span><span class="p">:</span>
        <span class="n">search_path</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#include&quot;</span><span class="p">):</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">include_file</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="o">=</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="n">include_file</span> <span class="o">=</span> <span class="p">(</span><span class="n">search_path</span> <span class="o">/</span> <span class="n">include_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">include_file</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">extendleft</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="n">include_file</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
                    <span class="p">]</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#if&quot;</span><span class="p">):</span>
            <span class="o">...</span>  <span class="c1"># sorry; this may break things</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#else&quot;</span><span class="p">):</span>
            <span class="o">...</span>  <span class="c1"># sorry; this may break things</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#elif&quot;</span><span class="p">):</span>
            <span class="o">...</span>  <span class="c1"># sorry; this may break things</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#endif&quot;</span><span class="p">):</span>
            <span class="o">...</span>  <span class="c1"># sorry; this may break things</span>
        <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#define&quot;</span><span class="p">):</span>
            <span class="k">while</span> <span class="n">stack</span> <span class="ow">and</span> <span class="n">line</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">):</span>
                <span class="n">search_path</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>

            <span class="o">...</span>  <span class="c1"># sorry; I think we can do better</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.snl.SequencerProgramGraph" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgramGraph</span><span class="p">(</span><span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SequencerProgram</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">highlight_states</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">include_code</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></code>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="whatrecord.graph._GraphHelper">_GraphHelper</span></code></p>

  
      <p>A graph for a SequencerProgram.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>program</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.snl.SequencerProgram" href="#whatrecord.snl.SequencerProgram">SequencerProgram</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A program to add.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>highlight_states : list of str, optional
    List of state names to highlight.</p>
<p>include_code : bool, optional
    Include code, where relevant, in nodes.</p>

              <details class="quote">
                <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SequencerProgram</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">highlight_states</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">include_code</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">include_code</span> <span class="o">=</span> <span class="n">include_code</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">highlight_states</span> <span class="o">=</span> <span class="n">highlight_states</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">program</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_program</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>

  

  <div class="doc doc-children">







<h6 id="whatrecord.snl.SequencerProgramGraph-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.snl.SequencerProgramGraph.add_program" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgramGraph</span><span class="o">.</span><span class="n">add_program</span><span class="p">(</span><span class="n">program</span><span class="p">:</span> <span class="n">SequencerProgram</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Add a program to the graph.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_program</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program</span><span class="p">:</span> <span class="n">SequencerProgram</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a program to the graph.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">state_set</span> <span class="ow">in</span> <span class="n">program</span><span class="o">.</span><span class="n">state_sets</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">state_set</span><span class="o">.</span><span class="n">states</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_state</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">state_set</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>

    <span class="c1"># Only add entry/exit labels if there&#39;s an edge</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entry_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entry_label</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_code</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">entry</span><span class="p">,</span> <span class="s2">&quot;(Startup)&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exit_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_exit_label</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_code</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">exit</span><span class="p">,</span> <span class="s2">&quot;(Exit)&quot;</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.snl.SequencerProgramGraph.get_code" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">snl</span><span class="o">.</span><span class="n">SequencerProgramGraph</span><span class="o">.</span><span class="n">get_code</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Get code for a node/edge.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/snl.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get code for a node/edge.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_code</span> <span class="ow">and</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_code</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span> <span class="ow">or</span> <span class="n">default</span>
    <span class="k">return</span> <span class="n">default</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
<h4 id="whatrecord.snl-functions">Functions</h4>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




<h3 id="whatrecord.streamdevice" class="doc doc-heading">
          <code>whatrecord.streamdevice</code>


</h3>

  <div class="doc doc-contents first">

  

  <div class="doc doc-children">






<h4 id="whatrecord.streamdevice-classes">Classes</h4>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.streamdevice.StreamDeviceState" class="doc doc-heading">
          <code>whatrecord.streamdevice.StreamDeviceState</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="whatrecord.common.ShellStateHandler" href="../utilities/#whatrecord.common.ShellStateHandler">ShellStateHandler</a></code></p>

  
      <p>StreamDevice IOC shell state handler / container.</p>
<p>Contains hooks for StreamDevice-related commands and state information.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>protocols</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="whatrecord.streamdevice.StreamProtocol" href="#whatrecord.streamdevice.StreamProtocol">StreamProtocol</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Loaded StreamDevice protocols by name.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>


  

  <div class="doc doc-children">







<h6 id="whatrecord.streamdevice.StreamDeviceState-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.streamdevice.StreamDeviceState.annotate_record" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">streamdevice</span><span class="o">.</span><span class="n">StreamDeviceState</span><span class="o">.</span><span class="n">annotate_record</span><span class="p">(</span><span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Hook to annotate a record after being loaded.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/streamdevice.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">annotate_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">RecordInstance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hook to annotate a record after being loaded.&quot;&quot;&quot;</span>
    <span class="n">dtype</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;DTYP&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">dtype</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;stream&quot;</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">info_field</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;INP&quot;</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OUT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">info_field</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">info_field</span><span class="p">,</span> <span class="n">PVAFieldReference</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;INP/OUT not defined correctly&quot;</span>
        <span class="p">}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">info_field</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;INP/OUT not defined correctly (JSON)&quot;</span>
        <span class="p">}</span>

    <span class="n">info_field</span> <span class="o">=</span> <span class="n">info_field</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">proto_file</span><span class="p">,</span> <span class="n">proto_name</span><span class="p">,</span> <span class="o">*</span><span class="n">proto_args</span> <span class="o">=</span> <span class="n">split_iocsh_line</span><span class="p">(</span><span class="n">info_field</span><span class="p">)</span><span class="o">.</span><span class="n">argv</span>
        <span class="n">proto_file</span> <span class="o">=</span> <span class="n">proto_file</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;@ &quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">results</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid StreamDevice input/output field: </span><span class="si">{</span><span class="n">info_field</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">proto_file</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">proto_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">proto_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">protocol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_streamdevice_protocol</span><span class="p">(</span><span class="n">proto_file</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">results</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ex</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">proto_name</span> <span class="ow">in</span> <span class="n">protocol</span><span class="o">.</span><span class="n">protocols</span><span class="p">:</span>
                <span class="n">results</span><span class="p">[</span><span class="s2">&quot;protocol&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">protocols</span><span class="p">[</span><span class="n">proto_name</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">results</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unknown protocol </span><span class="si">{</span><span class="n">proto_name</span><span class="si">!r}</span><span class="s2"> in </span><span class="si">{</span><span class="n">proto_file</span><span class="si">}</span><span class="s2">; &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;options are: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">protocol</span><span class="o">.</span><span class="n">protocols</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;protocol_file&quot;</span><span class="p">:</span> <span class="n">proto_file</span><span class="p">,</span>
        <span class="s2">&quot;protocol_name&quot;</span><span class="p">:</span> <span class="n">proto_name</span><span class="p">,</span>
        <span class="s2">&quot;protocol_args&quot;</span><span class="p">:</span> <span class="n">proto_args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">results</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.streamdevice.StreamDeviceState.load_streamdevice_protocol" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">streamdevice</span><span class="o">.</span><span class="n">StreamDeviceState</span><span class="o">.</span><span class="n">load_streamdevice_protocol</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span></code>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a StreamDevice protocol file.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/streamdevice.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_streamdevice_protocol</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">AnyPath</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a StreamDevice protocol file.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_streamdevice_protocol</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocols</span><span class="p">:</span>
        <span class="n">shell_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_handler</span>
        <span class="n">fn</span><span class="p">,</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">shell_state</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocols</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">StreamProtocol</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
            <span class="n">contents</span><span class="p">,</span>
            <span class="n">filename</span><span class="o">=</span><span class="n">fn</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocols</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h5 id="whatrecord.streamdevice.StreamProtocol" class="doc doc-heading">
          <code>whatrecord.streamdevice.StreamProtocol</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">

  
      <p>Representation of a StreamDevice protocol.</p>


  

  <div class="doc doc-children">







<h6 id="whatrecord.streamdevice.StreamProtocol-functions">Functions</h6>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.streamdevice.StreamProtocol.from_file" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">streamdevice</span><span class="o">.</span><span class="n">StreamProtocol</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a StreamDevice protocol file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span> or str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The filename.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>protocol</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="whatrecord.streamdevice.StreamProtocol" href="#whatrecord.streamdevice.StreamProtocol">StreamProtocol</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The StreamDevice protocol.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/streamdevice.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fn</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a StreamDevice protocol file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : pathlib.Path or str</span>
<span class="sd">        The filename.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    protocol : StreamProtocol</span>
<span class="sd">        The StreamDevice protocol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span><span class="o">=</span><span class="n">fn</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.streamdevice.StreamProtocol.from_file_obj" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">streamdevice</span><span class="o">.</span><span class="n">StreamProtocol</span><span class="o">.</span><span class="n">from_file_obj</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a protocol file given a file object.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/streamdevice.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_file_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a protocol file given a file object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
        <span class="n">filename</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h7 id="whatrecord.streamdevice.StreamProtocol.from_string" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">streamdevice</span><span class="o">.</span><span class="n">StreamProtocol</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h7>


  <div class="doc doc-contents ">
  
      <p>Load a protocol file given its string contents.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/streamdevice.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamProtocol</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a protocol file given its string contents.&quot;&quot;&quot;</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">grammar</span> <span class="o">=</span> <span class="n">lark</span><span class="o">.</span><span class="n">Lark</span><span class="o">.</span><span class="n">open_from_package</span><span class="p">(</span>
        <span class="s2">&quot;whatrecord&quot;</span><span class="p">,</span>
        <span class="s2">&quot;streamdevice.lark&quot;</span><span class="p">,</span>
        <span class="n">search_paths</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;grammar&quot;</span><span class="p">,</span> <span class="p">),</span>
        <span class="n">parser</span><span class="o">=</span><span class="s2">&quot;earley&quot;</span><span class="p">,</span>
        <span class="n">maybe_placeholders</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="c1"># lexer_callbacks={&quot;COMMENT&quot;: comments.append},</span>
    <span class="p">)</span>

    <span class="n">proto</span> <span class="o">=</span> <span class="n">_ProtocolTransformer</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
        <span class="n">grammar</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">proto</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="n">comments</span>
    <span class="k">return</span> <span class="n">proto</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
<h4 id="whatrecord.streamdevice-functions">Functions</h4>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">




<h3 id="whatrecord.transformer" class="doc doc-heading">
          <code>whatrecord.transformer</code>


</h3>

  <div class="doc doc-contents first">
  
      <p>Helpers for writing lark transformers.</p>

  

  <div class="doc doc-children">






<h4 id="whatrecord.transformer-classes">Classes</h4>
<h4 id="whatrecord.transformer-functions">Functions</h4>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.context_from_token" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">context_from_token</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">lark</span><span class="o">.</span><span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FullLoadContext</span></code>

</h5>


  <div class="doc doc-contents ">
  
      <p>Get a LoadContext from a lark Token.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">context_from_token</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="n">lark</span><span class="o">.</span><span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FullLoadContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a LoadContext from a lark Token.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">LoadContext</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">fn</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">token</span><span class="o">.</span><span class="n">line</span><span class="p">),</span> <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.context_from_tree" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">context_from_tree</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tree</span><span class="p">:</span> <span class="n">lark</span><span class="o">.</span><span class="n">Tree</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FullLoadContext</span></code>

</h5>


  <div class="doc doc-contents ">
  
      <p>Get a LoadContext from a lark Tree.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">context_from_tree</span><span class="p">(</span><span class="n">fn</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tree</span><span class="p">:</span> <span class="n">lark</span><span class="o">.</span><span class="n">Tree</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FullLoadContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a LoadContext from a lark Tree.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">LoadContext</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">fn</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">tree</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">line</span><span class="p">),</span> <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.dictify" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">dictify</span><span class="p">(</span><span class="o">*</span><span class="n">tuples</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Transformer helper to stringify a single argument.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">dictify</span><span class="p">(</span><span class="o">*</span><span class="n">tuples</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformer helper to stringify a single argument.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">tuples</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.ignore" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Transformer helper to drop the subtree.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">ignore</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformer helper to drop the subtree.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.listify" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">listify</span><span class="p">(</span><span class="o">*</span><span class="n">objects</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Transformer helper to listify *args.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">listify</span><span class="p">(</span><span class="o">*</span><span class="n">objects</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformer helper to listify *args.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.listify_strings" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">listify_strings</span><span class="p">(</span><span class="o">*</span><span class="n">objects</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">lark</span><span class="o">.</span><span class="n">Token</span><span class="p">])</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Transformer helper to listify *args and stringify each arg.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">listify_strings</span><span class="p">(</span><span class="o">*</span><span class="n">objects</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">lark</span><span class="o">.</span><span class="n">Token</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformer helper to listify *args and stringify each arg.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.pass_through" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">pass_through</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">T</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Transformer helper to pass through an optional single argument.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">pass_through</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformer helper to pass through an optional single argument.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.stringify" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">lark</span><span class="o">.</span><span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Transformer helper to stringify a single argument.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">lark</span><span class="o">.</span><span class="n">Token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformer helper to stringify a single argument.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h5 id="whatrecord.transformer.tuple_args" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">whatrecord</span><span class="o">.</span><span class="n">transformer</span><span class="o">.</span><span class="n">tuple_args</span><span class="p">(</span><span class="o">*</span><span class="n">objects</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h5>


  <div class="doc doc-contents ">
  
      <p>Transformer helper to get back the *args tuple.</p>

          <details class="quote">
            <summary>Source code in <code>/opt/hostedtoolcache/Python/3.9.17/x64/lib/python3.9/site-packages/whatrecord/transformer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">tuple_args</span><span class="p">(</span><span class="o">*</span><span class="n">objects</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transformer helper to get back the *args tuple.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">objects</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      (C) 2023 SLAC National Accelerator Laboratory
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.top", "toc.integrate"], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.78eede0e.min.js"></script>
      
    
  </body>
</html>